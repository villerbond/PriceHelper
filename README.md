# PriceHelper
# Техническое задание по базам данных
## Описание
### Краткое описание
PriceHelper - веб-сайт для хранения пользователями цен на продукты в различных магазинах. 

Пользователь добавляет к себе в таблицу определенные продукты, допустим, это просто продукты, которые лично он относительно регулярно покупает, то же самое с магазинами, которые пользователь рассматривает для покупок. А далее он уже сам заносит цены на продукты в каждом магазине, ведь иногда цены, указанные в приложении магазина, отличаются. Если пользователю, грубо говоря, лень заполнять таблицу, то он может экспортировать таблицу пользователя, например, из того же города, а дальше сам её корректировать.

Помимо этого, если существуют пользователи, которые следят за ценами одного и того же продукта в одних и тех же магазинах (адрес имеет значение), то в таком случае,
если один пользователь поменял эту цену, то у остальных пользователей должно отображаться, что существует более свежая информация касательно цены данного продукта
в данном магазине. В данном случае отображается самая свежая информация, если уже несколько человек успело обновить цену. И далее пользователь может согласно новой информации
обновить цену в своей таблице, тогда уведомление у него пропадает.

Ну и если пользователь составляет список покупок, он заносит продукты в корзину, и получает оптимальный выбор магазинов, но если он хочет ограничиться парой магазинов, то можно установить потолок «сложности» (пользователь также сам определяет «сложность» магазина, например, магазин в шаговой доступности может иметь сложность 1, магазины подальше 2 или 3, это уже оценка самого пользователя), и тогда уже исходя из этого для пользователя подбираются магазины.

### Предметная область
Предметная область включает в себя следующие сущности:
* Пользователь 
* Город
* Продукт
* Категория продукта
* Магазин
* Цена
* Корзина

## Данные 
### Пользователь
В базе данных о пользователе хранятся следующие данные:
* Уникальное имя пользователя 
* Имя
* Фамилия
* Город
* Уникальный e-mail
* Пароль
* Аватар
* Приватный/публичный аккаунт (приватный аккаунт не могут просматривать
другие пользователи)
* Является ли пользователь администратором

Для регистрации необходимо ввести имя, фамилию, имя пользователя,
адрес почты и пароль. Остальные поля указываются в личном кабинете
по желанию. 

### Город
Для конкретизирования информации о ценах, пользователь может указать
свой город. В базе изначально содержится таблица городов,
пользователь может просто указать "Другой город", если его там нет,
это опциональная характеристика. Города добавляются только администратором.

* Название города

### Категория продуктов
Для удобства классификации продуктов в базе данных хранятся
категории продуктов

* Уникальное азвание категории

Категории также изначально хранятся в соответствующей таблице,
если нужной категории не имеется, можно просто указать "Разное",
также добавляются только администратором.

### Продукт
В базе данных хранится множество продуктов, но пользователь
может для себя создать новый продукт и использователь его в своих
целях, тогда другие пользователи этот продукт в общем списке видеть
не будут, итого каждый пользователь в общем списке видит 
изначальный продукте и добавленные им же

* Название продукта
* Категория продукта
* Иконка (фото) продукта
* Автор (если продукт изначальный (создан администратором), 
то такой продукт автора не имеет)

### Магазин
* Название магазина
* Иконка (фото) магазина
* Автор (аналогично продуктам)

Пользователь выбирает из общего списка продукты и магазины для себя,
и при связи пользователя и магазина пользователь также устанавливает
сложность в доступности этого магазина от 1 до 5 (пользователь
сам определяет в какой магазин ему легче идти, а в какой вызывает
трудности)

### Магазин пользователя
* Пользователь
* Магазин
* Сложность
* Адрес (в общей базе может находиться, например, "Пятерочка", но понятно, что цены в разных магазинах одной сети могут отличаться, так что пользователь может указать конкретный адрес)

### Продукт пользователя (имеется в виду продукт, который пользователь добавляет к себе в таблицу, это может быть как оригинальный продукт, так и его собственный)
* Пользователь
* Продукт

### Корзина
* Продукт пользователя
* Количество

Во вкладке "Корзина" пользователь выбирает из добавленных им продуктов те,
которые он собирается купить, а также указывается их количество

### Цена
* Магазин пользователя
* Продукт пользователя
* Цена (десятичное число)
* Комментарий
* Время обновлениея (время последнего обновления цены; по сути каждый раз при изменении значения цены в личной таблице пользователя время обновления меняется на текущее)

## Роли пользователей
### Неавторизированный пользователь
Неавторизированный пользователь может зарегистрироваться или войти
в существующий аккаунт
### Авторизованный пользователь
Может редактировать свою собственную таблицу, создавать свои
собственные продукты, которые в общем списке видны только ему
### Администратор
Администратор может добавлять продукты и магазины, которые попадают в базу данных
как оригинальные (то есть без автора), 
в общем списке их могут видеть все пользователи. Также может добавлять
города и категории.
 
## Подробнее
### Оптимальный поиск магазинов
Во вкладке "Корзина" пользователь может добавить продукты из своей личной таблицы в корзину и получить оптимальный выбор магазинов. В случае, если пользователь не указывает сложность, то ему дается набор магазинов, в которых продукты в корзине просто обойдутся дешевле всего. Тогда выведется таблица «продукт - магазин, где этот продукт дешевле всего - цена». Но тогда потенциально может быть большой разбор магазинов (например, у нас есть пять продуктов и пять магазинов, и каждый продукт дешевле всего в одном из пяти магазинов, и все эти магазины разные, тогда ради каждого продукта придётся идти в конкретный магазин, что в общем-то нерационально), и суммарная сложность всех магазинов, которые надо посетить, будет слишком большой (под суммарной сложностью имеется в виду сумма сложностей всех магазинов, которые нужно будет посетить, понятное дело, дважды сложность одного и того же магазина не учитывается). В таком случае пользователь может указать сложность, которая будет как бы потолком для суммарной сложности выбранных магазинов. Суммарная стоимость продуктов в этой ситуации не факт, что будет наименьшей глобально, но для выбранной сложности это будет самый выгодный вариант. 

## UI / API
Проект реализовывается в виде веб-сайта

Архитектура, диаграммы и некоторые пользовательские сценарии:
https://miro.com/app/board/uXjVNOVcT6c=/?share_link_id=679770638265

## Технологии разработки
### Языки программирования
* Python Django
* JS
### СУБД
* PostgreSQL

## Тестирование
* Тестирование пользовательского интерфейса - проверка на корректность
отображения интерфейса и его элементов
* Тестирование пользовательских сценариев - создание некоторых
сценариев, основанных на типичных действиях пользователей,
проверка на корректность работы сайта при них
* Модульное тестирование - проверка входных и выходных данных для
каждой функции приложения, проверка работы отдельных функций, таких как
добавление продуктов, магазинов, цен, а также расчет оптимального
выбора магазинов
* Тестирование импорта данных - проверка корректности импорта
таблицы цен для других пользователей

## Структура БД
https://lucid.app/lucidchart/76d604a4-8063-4ed8-876e-46c6e4a8587f/edit?invitationId=inv_508c6e08-cf5c-4622-988a-78ded2984e8b

![ER-диаграмма базы данных (с «вороньими лапками») (1)](https://github.com/villerbond/PriceHelper/assets/91826226/56985229-fb65-4d75-bb29-78f560c51022)

